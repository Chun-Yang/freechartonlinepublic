{"version":3,"sources":["utils/getReactDataSheetDataFromData.js","utils/constants.js","ChartTypeSelector.js","utils/getChartDataFromData.js","ChartDisplay.js","DownloadButton.js","ShareButton.js","App.js","serviceWorker.js","index.js"],"names":["getReactDataSheetDataFromData","data","_data","Object","toArray","firstRow","rows","slice","rdsFirstRow","map","value","j","className","rdsRows","row","i","concat","toConsumableArray","CHART_TYPES","DEFAULT_REAL_DATA","DEFAULT_PADDING_DATA","times","length","DEFAULT_DATA","MUI_THEME","createMuiTheme","palette","primary","main","contrastText","secondary","ChartTypeSelector","_ref","chartType","onChartTypeChange","react_default","a","createElement","c","Chip_default","key","label","startCase","color","onClick","COLOR_SOLID","COLOR_TRANSPARENT","getChartDataFromData","_ref2","_ref2$","seriesNames","validRows","filter","rawRow","labels","datasets","_unzip","unzip","_unzip2","rawDataSet","index","dataset","borderColor","backgroundColor","fill","_ref3","getChartOptions","chartTitleText","scales","xAxes","ticks","autoSkip","yAxes","beginAtZero","title","display","text","position","elements","line","tension","layout","padding","right","getPadding","plugins","datalabels","align","anchor","ChartDisplay","Chart","pluginService","register","ChartDataLabels","_this$props","this","props","redraw","selectedChartType","es","id","type","options","Component","DownloadButton","Button_default","variant","filename","link","document","download","href","getElementById","toDataURL","click","downloadImage","ShareButton","state","snackbarOpen","handleClick","_this","setState","el","window","location","body","appendChild","select","execCommand","removeChild","copyURLToClipboard","handleClose","Snackbar_default","anchorOrigin","vertical","horizontal","open","autoHideDuration","onClose","ContentProps","aria-describedby","message","action","IconButton_default","aria-label","App","initialState","nextState","serializable","objectSpread","version","hash","encodeURIComponent","JSON","stringify","_this2","Grid_default","container","spacing","styles","theme","item","xs","md","src_ShareButton","src_ChartDisplay","src_ChartTypeSelector","setStateAndUrl","lib_default","valueRenderer","cell","onCellsChanged","changes","forEach","col","Link_default","target","Boolean","hostname","match","substr","parse","decodeURIComponent","_unused","ReactDOM","render","src_App_0","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.379f7508.chunk.js","sourcesContent":["export default function getReactDataSheetDataFromData(data) {\n  const [firstRow, ...rows] = data;\n  const rdsFirstRow = firstRow.map((value, j) => ({\n    value: value == null ? null : value,\n    className: j === 0 ? \"rds-chart-name read-only\" : \"read-only\"\n  }));\n  const rdsRows = rows.map((row, i) =>\n    row.map((value, j) => ({\n      value: value == null ? null : value,\n      className: j === 0 ? \"read-only\" : \"\"\n    }))\n  );\n  return [rdsFirstRow, ...rdsRows];\n}\n","import { createMuiTheme } from \"@material-ui/core/styles\";\nimport times from \"lodash.times\";\n\n// NOTE: we do not support all charts\n// const CHART_TYPES = Object.keys(Chart.controllers);\n// CHART_TYPES.sort((x, y) => x.localeCompare(y));\n// NOTE: different charts\n// - bubble (multiple sources, specific data format: {x, y, r})\n// - scatter (multiple sources, specific data format: {x, y})\n// - bar, horizontalBar, line, radar (multiple sources)\n// - polarArea, pie, doughnut (one source or multiple source)\nexport const CHART_TYPES = [\n  \"bar\",\n  // 'bubble', // format {x, y, r}\n  // 'doughnut', // legend on labels\n  \"horizontalBar\",\n  \"line\",\n  // 'pie', // legend on labels\n  // 'polarArea', // legend on labels\n  \"radar\"\n  // 'scatter', // format {x, y}\n];\n\nconst DEFAULT_COLS = 4;\nconst DEFAULT_ROWS = 42;\nconst DEFAULT_REAL_DATA = [\n  [\"Charts Created Last Week\", \"Alice\", \"Bob\", \"Carol\"],\n  [\"Monday\", 43, 70, 67],\n  [\"Tuesday\", 88, 65, 35],\n  [\"Wednesday\", 73, 10, 66],\n  [\"Thursday\", 14, 59, 85],\n  [\"Friday\", 50, 78, 66],\n  [\"Saturday\", 59, 92, 0],\n  [\"Sunday\", 83, 27, 27]\n];\nconst DEFAULT_PADDING_DATA = times(\n  DEFAULT_ROWS - DEFAULT_REAL_DATA.length,\n  () => times(DEFAULT_COLS, () => null)\n);\n\nexport const DEFAULT_DATA = DEFAULT_REAL_DATA.concat(DEFAULT_PADDING_DATA);\n\nexport const MUI_THEME = createMuiTheme({\n  palette: {\n    primary: {\n      main: \"#36a2eb\",\n      contrastText: '#ffffff'\n    },\n    secondary: {\n      main: \"#ff6384\",\n      contrastText: '#ffffff'\n    }\n  }\n});\n","import React from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport startCase from \"lodash.startcase\";\nimport { CHART_TYPES } from \"./utils/constants\";\n\nfunction ChartTypeSelector({ chartType, onChartTypeChange }) {\n  return (\n    <div className=\"chart-type-selector\">\n      {CHART_TYPES.map(c => (\n        <Chip\n          key={c}\n          label={startCase(c)}\n          color={c === chartType ? \"primary\" : \"default\"}\n          onClick={() => onChartTypeChange(c)}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default ChartTypeSelector;\n","import unzip from \"lodash.unzip\";\n\nconst COLOR_SOLID = [\n  \"rgba(54,162,235)\", // blue\n  \"rgba(255,206,86)\", // yellow\n  \"rgba(255,99,132)\" // red\n];\n\nconst COLOR_TRANSPARENT = [\n  \"rgba(54,162,235, 0.5)\", // blue\n  \"rgba(255,206,86, 0.5)\", // yellow\n  \"rgba(255,99,132, 0.5)\" // red\n];\n\nexport default function getChartDataFromData(\n  [[chartName, ...seriesNames], ...rawRows],\n  chartType\n) {\n  const validRows = rawRows.filter(rawRow => rawRow[0]);\n  if (validRows.length === 0) {\n    return {\n      labels: [],\n      datasets: []\n    };\n  }\n\n  const [labels, ...rawDatasets] = unzip(validRows);\n  const datasets = rawDatasets\n    .map((rawDataSet, index) => {\n      const dataset = {\n        label: seriesNames[index],\n        data: rawDataSet\n      };\n      switch (chartType) {\n        case \"bar\":\n        case \"horizontalBar\":\n          dataset.borderColor = COLOR_SOLID[index];\n          dataset.backgroundColor = COLOR_SOLID[index];\n          break;\n        case \"line\":\n          dataset.borderColor = COLOR_SOLID[index];\n          dataset.backgroundColor = COLOR_SOLID[index];\n          dataset.fill = false;\n          break;\n        case \"radar\":\n          dataset.borderColor = COLOR_SOLID[index];\n          dataset.backgroundColor = COLOR_TRANSPARENT[index];\n          break;\n        default:\n          break;\n      }\n      return dataset;\n    })\n    // we do not show data on chart if there is no series name\n    .filter(({ label }) => label);\n\n  return {\n    labels,\n    datasets\n  };\n}\n","import React, { Component } from \"react\";\nimport Chart from \"chart.js\";\nimport ChartDataLabels from \"chartjs-plugin-datalabels\";\nimport ChartComponent from \"react-chartjs-2\";\nimport getChartDataFromData from \"./utils/getChartDataFromData\";\n\nfunction getPadding (chartType) {\n  if (chartType === 'horizontalBar') {\n    return { right: 50 }\n  } else {\n    return {}\n  }\n}\n\nfunction getChartOptions({ chartTitleText, chartType }) {\n  const chartTitle = chartTitleText\n    ? {\n        display: true,\n        text: chartTitleText,\n        position: \"bottom\"\n      }\n    : null;\n  const scales = chartType !== 'radar'\n    ? {\n        xAxes: [\n          {\n            ticks: {\n              autoSkip: false\n            },\n          }\n        ],\n        yAxes: [\n          {\n            ticks: {\n              beginAtZero: true,\n              autoSkip: false\n            }\n          }\n        ]\n      }\n    : null;\n  const padding = getPadding(chartType);\n  return {\n    title: chartTitle,\n    elements: {\n      line: {\n        tension: 0\n      }\n    },\n    layout: {\n      padding,\n    },\n    scales,\n    plugins: {\n      datalabels: {\n        align: \"end\",\n        anchor: \"end\"\n      }\n    },\n  };\n}\n\nclass ChartDisplay extends Component {\n  componentDidMount() {\n    Chart.pluginService.register(ChartDataLabels);\n  }\n\n  render() {\n    const { redraw, data, selectedChartType, chartTitleText } = this.props;\n    return (\n      <ChartComponent\n        id=\"chart\"\n        redraw={redraw}\n        data={getChartDataFromData(data, selectedChartType)}\n        type={selectedChartType}\n        options={getChartOptions({\n          chartTitleText,\n          chartType: selectedChartType\n        })}\n      />\n    );\n  }\n}\n\nexport default ChartDisplay;\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\n\nexport default function DownloadButton({ chartTitleText }) {\n  return (\n    <div className=\"download-btn-wrapper\">\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        className=\"download-btn\"\n        onClick={() => downloadImage(chartTitleText)}\n      >\n        DOWNLOAD IMAGE\n      </Button>\n    </div>\n  );\n}\n\nfunction downloadImage(filename) {\n  const link = document.createElement(\"a\");\n  link.download = `${filename}.png`;\n  link.href = document.getElementById(\"chart\").toDataURL();\n  link.click();\n}\n","import React, { Component } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\n\nclass ShareButton extends Component {\n  state = {\n    snackbarOpen: false\n  };\n  handleClick = () => {\n    this.setState({ snackbarOpen: true });\n    copyURLToClipboard();\n  };\n  handleClose = () => {\n    this.setState({ snackbarOpen: false });\n  };\n  render() {\n    return (\n      <div className=\"download-btn-wrapper\">\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          className=\"download-btn\"\n          onClick={this.handleClick}\n        >\n          SHARE LINK\n        </Button>\n        <Snackbar\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"left\"\n          }}\n          open={this.state.snackbarOpen}\n          autoHideDuration={3000}\n          onClose={this.handleClose}\n          ContentProps={{\n            \"aria-describedby\": \"copy-success\"\n          }}\n          message={<span id=\"copy-success\">COPIED TO CLIPBOARD</span>}\n          action={[\n            <IconButton\n              key=\"close\"\n              aria-label=\"Close\"\n              color=\"inherit\"\n              onClick={this.handleClose}\n            >\n              x\n            </IconButton>\n          ]}\n        />\n      </div>\n    );\n  }\n}\n\nfunction copyURLToClipboard() {\n  const el = document.createElement(\"textarea\");\n  el.value = window.location.href;\n  document.body.appendChild(el);\n  el.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(el);\n}\n\nexport default ShareButton;\n","import React, { Component } from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Link from \"@material-ui/core/Link\";\nimport { MuiThemeProvider } from \"@material-ui/core/styles\";\nimport ReactDataSheet from \"react-datasheet\";\nimport \"react-datasheet/lib/react-datasheet.css\";\nimport \"./App.css\";\nimport getReactDataSheetDataFromData from \"./utils/getReactDataSheetDataFromData\";\nimport { CHART_TYPES, DEFAULT_DATA, MUI_THEME } from \"./utils/constants\";\nimport ChartTypeSelector from \"./ChartTypeSelector\";\nimport ChartDisplay from \"./ChartDisplay\";\nimport DownloadButton from './DownloadButton';\nimport ShareButton from './ShareButton';\n\nconst VERSION = 1;\n\nclass App extends Component {\n  state = {\n    selectedChartType:\n      this.props.initialState.selectedChartType || CHART_TYPES[0],\n    data: this.props.initialState.data || DEFAULT_DATA,\n    redraw: false\n  };\n\n  setStateAndUrl(nextState) {\n    this.setState(nextState);\n    const serializable = { version: VERSION, ...this.state, ...nextState };\n    delete serializable.redraw;\n    window.location.hash = encodeURIComponent(JSON.stringify(serializable));\n  }\n\n  render() {\n    const chartTitleText = this.state.data[0][0];\n    return (\n      <div id=\"App\">\n        <Grid container spacing={24}>\n          <MuiThemeProvider theme={MUI_THEME}>\n            <Grid item xs={12} md={6}>\n              <div className=\"save-buttons\">\n                <DownloadButton chartTitleText={chartTitleText} />\n                <ShareButton />\n              </div>\n              <ChartDisplay\n                redraw={this.state.redraw}\n                data={this.state.data}\n                selectedChartType={this.state.selectedChartType}\n                chartTitleText={chartTitleText}\n              />\n              <ChartTypeSelector\n                chartType={this.state.selectedChartType}\n                onChartTypeChange={selectedChartType => {\n                  this.setStateAndUrl({ selectedChartType, redraw: true });\n                }}\n              />\n            </Grid>\n          </MuiThemeProvider>\n          <Grid item xs={12} md={6}>\n            <ReactDataSheet\n              data={getReactDataSheetDataFromData(this.state.data)}\n              valueRenderer={cell => cell.value}\n              onCellsChanged={changes => {\n                const data = this.state.data.map(row => [...row]);\n                changes.forEach(({ cell, row, col, value }) => {\n                  data[row][col] = value;\n                });\n                this.setStateAndUrl({ data, redraw: false });\n              }}\n            />\n          </Grid>\n        </Grid>\n        <div className=\"feedback-link-wrapper\">\n          <Link href=\"mailto:feedback@freechartonline.com\" target=\"_blank\">\n            feedback@freechartonline.com\n          </Link>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nconst VERSION = 1;\n\nconst hash = window.location.hash.substr(1);\nlet initialState;\ntry {\n  initialState = JSON.parse(decodeURIComponent(hash));\n} catch {\n  initialState = { version: VERSION };\n}\n\nif (initialState.version === 1) {\n  ReactDOM.render(\n    <App initialState={initialState} />,\n    document.getElementById(\"root\")\n  );\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}